(()=>{"use strict";const t=function(){var t;const o=null!==(t=window.remark_config.host)&&void 0!==t?t:"http://52.91.75.237:8080";if(!o)throw new Error("Remark42: remark_config.host wasn't configured.");try{const{protocol:t}=new URL(o);if(t!==window.location.protocol&&console.error("Remark42: Protocol mismatch."),!t.startsWith("http"))throw console.error("Remark42: Wrong protocol in host URL."),new Error}catch(t){throw new Error("Remark42: Invalid host URL.")}return o}();function o(){const o=Array.from(document.getElementsByClassName("remark42__counter"));if(!o)throw new Error("Remark42: Can't find counter nodes.");if(!window.remark_config)throw new Error("Remark42: Config object is undefined.");if(!window.remark_config.site_id)throw new Error("Remark42: Site ID is undefined.");const r=o.reduce(((t,o)=>{const r=o.dataset.url||window.remark_config.url||`${window.location.origin}${window.location.pathname}`;return t[r]||(t[r]=[]),t[r].push(o),t}),{}),e=new XMLHttpRequest;e.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&200===this.status)try{JSON.parse(this.responseText).forEach((t=>r[t.url].map((o=>o.innerHTML=t.count.toString(10)))))}catch(t){}},e.open("POST",`${t}/api/v1/counts?site=${window.remark_config.site_id}`,!0),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(Object.keys(r)))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()})();